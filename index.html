<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Editor ElÃ©ctrico con GPS</title>

  <link rel="icon" type="image/x-icon" href="./public/favicon.ico" />

  <!-- Konva -->
  <script src="https://cdn.jsdelivr.net/npm/konva@9.3.11/konva.min.js"></script>

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Mapbox -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v3.6.0/mapbox-gl.css" rel="stylesheet">
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.6.0/mapbox-gl.js"></script>

  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <!-- MENU LATERAL -->
  <div id="menu">
    <div class="logo">
      <h2>EDITOR ELÃ‰CTRICO CON GPS</h2>
      <p>Sistema de georreferenciaciÃ³n de redes elÃ©ctricas</p>
    </div>

    <div>
      <h3>Vistas</h3>
      <div class="btn-group">
        <button class="tab" onclick="switchView('editor')">ğŸ“ Editor de Red</button>
        <button class="tab active" onclick="switchView('map')">ğŸ—º Mapa GPS</button>
      </div>
    </div>

    <div>
      <h3>Herramientas</h3>
      <div class="btn-group">
        <button><span>ğŸŸ </span> Poste</button>
        <button><span>ğŸ”µ</span> Transformador</button>
        <button><span>ğŸ”º</span> Seccionador</button>
        <button><span>ğŸ”´</span> SubestaciÃ³n</button>
        <button><span>ğŸŸ¢</span> Usuario</button>
        <button class="btn-connect"><span>ğŸ“</span> Conectar</button>
        <button class="btn-gps"><span>ğŸ“</span> Obtener GPS Actual</button>
      </div>
    </div>

    <!-- NUEVO: BOTÃ“N PARA CAMBIAR DE MAPA -->
    <div>
      <h3>Mapa base</h3>
      <div class="btn-group">
        <button id="toggle-map-btn" class="btn-export"><span>ğŸ—ºï¸</span> Cambiar Mapa (OpenStreet â†’ Mapbox 3D)</button>
      </div>
    </div>

    <!-- FILTROS -->
    <div class="filtros">
      <h3>Filtros de Nodos</h3>
      <div class="btn-group">
        <button class="filter-btn sub active" onclick="toggleFilter('filter-subestaciones', this)">
          <span>ğŸ”´</span> Subestaciones
          <div class="checkbox">
            <span class="checkbox-indicator">âœ”</span>
            <input type="checkbox" id="filter-subestaciones" checked hidden>
          </div>
        </button>
        <button class="filter-btn poste active" onclick="toggleFilter('filter-postes', this)">
          <span>ğŸŸ </span> Postes
          <div class="checkbox">
            <span class="checkbox-indicator">âœ”</span>
            <input type="checkbox" id="filter-postes" checked hidden>
          </div>
        </button>
        <button class="filter-btn usuario active" onclick="toggleFilter('filter-usuarios', this)">
          <span>ğŸŸ¢</span> Usuarios
          <div class="checkbox">
            <span class="checkbox-indicator">âœ”</span>
            <input type="checkbox" id="filter-usuarios" checked hidden>
          </div>
        </button>
      </div>
    </div>

    <div class="btn-group">
      <button class="btn-save"><span>ğŸ’¾</span> Guardar Datos</button>
      <button class="btn-export"><span>ğŸ–¼</span> Exportar PNG</button>
      <button class="btn-export"><span>ğŸŒ</span> Exportar GeoJSON</button>
    </div>
  </div>

  <!-- CONTENEDOR PRINCIPAL -->
  <div id="main-container">
    <div id="editor-view" class="view">
      <div id="container"></div>
    </div>

    <div id="map-view" class="view active">
      <div id="map"></div>
    </div>

        <!-- </div>
          <div class="status-bar">
            <div class="connection-status">
                <div class="status-indicator" id="db-status"></div>
                <span>Modo: <span id="status-text">Listo</span></span>
            </div>
            <div id="selected-info">NingÃºn elemento seleccionado</div>
            <div id="gps-info">GPS: No disponible</div>
        </div> -->
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>
